<HTML>
<HEAD>
<TITLE>Regular Expression Value Finder - Part 2</TITLE>
<link type="text/css" rel="stylesheet" href="../UCLIDTesting.css">
</HEAD>
<BODY>
<h1>Regular Expression Value Finder - Part 2</h1>
<hr>
	<h3>Fuzzy Regular Expressions</h3>
	<ul>
		<li>Fuzzy regular expressions let you to match phrases while allowing a specified number of errors.</li>
        <li>They are most often used to compensate for bad OCR.</li>
	</ul>
	<h3>Usage</h3>
	<ul>
        <li>To catch a phrase that has one error, use the syntax <b>(?~&lt&gtLITERAL_EXPRESSION)</b>.
            <ul>
                <li>For example, <i>(?~&lt&gtHOUSE)</i> will match <i>HOUSE</i>, <i>HAUSE</i>, <i>HOOSE</i>, etc.</li>
            </ul>
        </li>
        <p>
            <li>To catch a phrase that has multiple errors, set the <b>error</b> setting to the number of errors you wish to allow.
                <ul>
                    <li>For example <i>(?~&lterror=2&gtUNICORN)</i> will match <i>UNICORN</i>, <i>ONICORN</i>, <i>OHICORN</i>, <i>UN1COFN</i>, etc. </li>
                </ul>
            </li>
        </p>
        <p>
            <li>You can use the <b>xtra_ws</b> setting to allow extra spaces in the found phrase.  To do this, simply set it to the number of extra whitespace characters that you wish to allow.
                <ul>
                    <li>For example, <i>(?~&lterror=1,xtra_ws=2&gtAPPLE)</i> will match <i>APPLE</i>, <i>ABPLE</i>, <i>AB PLE</i>, <i>AP P IE</i>, etc. </li>
                </ul>
            </li>
        </p>
        <p>
            <li>By default, the spatial information found by fuzzy regular expression sometimes does not exactly line up with the location of found words on the page.  For rules objects where spatial information is important, such as <i>Locate Image Region</i> objects, you should set the <b>method</b> setting to <b>better_fit</b>.
                <ul>
                    <li>For example, using <i>(?~&lterror=3,method=better_fit&gtSocial\x20Security\x20Number)</i> as a clue in your Image Region will ensure that the created region is where you expect it to be.</li>
                    <li>The better_fit method is a bit more resource intensive than the default method, so only use it if you need exact spatial information.</li>
                </ul>
            </li>
        </p>
        <li>Inside of fuzzy regular expressions, you are only allowed to use literals, character classes, and fixed-length repetitions.
            <ul>
                <p>
                    <li>Allowed:
                        <p>
                            <ul>
                                <li>(?~&lterror=2&gtMayor\x20Dave)</li>
                                <li>(?~&lterror=2&gtB[AEIOU]B)</li>
                                <li>(?~&lterror=5&gtArrive\x20in\d{2}\x20days)</li>
                            </ul>
                        </p>
                    </li>
                </p>
                <p>
                    <li><b>NOT</b> allowed:
                        <p>
                            <ul>
                                <li>(?~&lt&gtGO*AL)</li>
                                <li>(?~&lterror=2&gtH(is|er))</li>
                                <li>(?~&lterror=5&gtArrive\x20in\d{1,2}\x20days)</li>
                            </ul>
                        </p>
                    </li>
                </p>
            </ul>
        </li>
        <li>Combining fuzzy regular expressions with other expressions can sometimes result in extremely long processing times.  To be safe, if you are using a fuzzy regular expression in combination with another expression, put the fuzzy regular expression in an atomic group.
            <ul>
                <p>
                    <li>Dangerous:
                        <ul>
                            <p>
                                <li>(?~&lterror=2&gtTimetable)[\s\S]*\bPM\b</li>
                                <li>(?~&lterror=2&gtSocial\x20Security\x20Number)[\s\S]{0,25}(?~&lterror=2&gtDate\x20of\x20Birth)</li>
                            </p>
                        </ul>
                    </li>
                </p>
                <p>
                <li>Safe:
                    <ul>
                        <p>
                            <li>(?&gt(?~&lterror=2&gtTimetable))[\s\S]*\bPM\b</li>
                            <li>(?&gt(?~&lterror=2&gtSocial\x20Security\x20Number))[\s\S]{0,25}(?&gt(?~&lterror=2&gtDate\x20of\x20Birth))</li>
                        </p>
                    </ul>
                </li>
                </p>
            </ul>
        </li>
        <li><p>The fuzzy expression<br>
        <pre>&#x22;(?~&#x3C;error=4&#x3E;Certificate)&#x22;</pre>
        matched against &#x22;Certificatc&#x22; will only match &#x22;Certificat&#x22;<br>
        So, the expression<br>
        <pre>&#x22;(?~&#x3C;error=4&#x3E;Certificate)\W*of\W*Death&#x22;</pre>
        will not match the phrase &#x22;Certificatc of Death&#x22;</p>
        <p>To work around this, allow for some extra text after the fuzzy regex, proportionate to the errors allowed. In this case use<br>
        <pre>&#x22;(?~&#x3C;error=4&#x3E;Certificate)[\s\S]{0,4}\W*of\W*Death&#x22;</pre>
        To speed up the expression significantly use atomic groups like this<br>
        <pre>&#x22;(?&#x3E;(?~&#x3C;error=4&#x3E;Certificate))[\s\S]{0,4}of\W*Death&#x22;</pre></p>
        </li>
        <li>Fuzzy regular expressions do <b>not</b> work inside look behind groups.  (The regular expression will not throw an error, but it will not behave in a fuzzy manner.)
            <ul>
                <p>
                    <li><b>NOT</b> allowed:
                        <ul>
                            <p>
                                <li>(?&lt=(?~&lterror=5&gtSocial\x20Security\x20Number))\d{9}</li>
                                <li>(?&lt!(?~&lterror=3&gtState\x20Project\x20Number))\d{9}</li>
                            </p>
                        </ul>
                    </li>
                    <li>To work around this put a look-ahead inside the look-behind:<br>
                        Change this:<br>
                        <pre>(?&#x3C;=(?~&#x3C;error=2&#x3E;Number)\W*)</pre>
                        to this:<br>
                        <pre>(?&#x3C;=(?=(?~&#x3C;error=2&#x3E;Number))[\s\S]{0,8}\W*)</pre>
                        (with the 8 in [\s\S]{0,8} being the total of the errors and number of characters in &#x22;Number&#x22;)
                    </li>
                </p>
            </ul>
        </li>
	</ul>
    <hr>
    <a href="../../START_HERE.html">HOME</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="./ConditionalFinder.html">NEXT -></a>
    <br/><br/>
  </BODY>
</HTML>
