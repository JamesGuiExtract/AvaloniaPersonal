<HTML>

<HEAD>
<TITLE>ID Shield for Laserfiche Background Service Testing Checklist</TITLE>
<link type="text/css" rel="stylesheet" href="../../../../ReusableComponents/COMComponents/UCLIDTestingFramework/Misc/UCLIDTesting.css">
</HEAD>
<BODY>

<h1>ID Shield for Laserfiche<br>Background Service Testing Checklist<br>
<IMG src="../../../../ReusableComponents/COMComponents/UCLIDTestingFramework/Misc/TestingChecklistHeader.gif">
</h1>

<hr>

<ul>
	<li><h3>Testing Setup</h3>
	<ul>
		<li>Create a new virtual machine using the virtual machine disk ( .vhd file ) at: 
		<b>I:\Common\Engineering\VirtualMachines\Laserfiche_72</b>
		or
		<b>I:\Common\Engineering\VirtualMachines\Laserfiche_8</b>
		<li>Install <b>ID Shield for Laserfiche</b> on the virtual machine.
		<li>Install FKB update 8.2.
		<li>Generate a <b>Laserfiche Integration</b> license file.  Copy the license to 
		the usual CommonComponents folder.
		<li>Launch <b>USB License Key Manager</b> and point to a machine that contains a 
		USB key (usually <b>Lisa</b>).
		<li>Disable the firewall on the virtual machine to ensure it will not interfere with 
		machines accessing its Laserfiche Server remotely.
		<li>Copy the rules file:
		<b>i:\Common\Testing\Product Testing\Laserfiche\Rules\ID Shield for LF.rsd.etf</b> 
		to a location that can be accessed without needing to be a member of the domain. One
		solution is to create a shared folder on the VM and place the rules file in it.
<p>
		<li><b>Configure the repository for use with ID Shield</b>
		<ul>
			<li>Launch <b>ID Shield Admin Console</b>.
			<li>Verify <b>ID Shield Demo</b> <b>LF8</b> appears in the repository dropdown list of 
			the <b>Select Repository</b> dialog.
			<li>Select <b>ID Shield Demo</b> or <b>LF8</b> and log in with the username "admin" and password "a".
			<li>Click on the <b>About</b> and verify the ID Shield and FKB versions.
			<li>On the <b>Repository</b> tab, click the <b>Create Tags</b> button and 
			verify the Admin Console reports that the tags were successfully created.
			<li>In the Laserfiche client create a new top-level folder called <b>ID Shield</b>.
			<li>Use the Fields | Tags context menu to apply the <b>ID Shield - Settings</b> 
			tag to the <b>ID Shield</b> folder.
			<li>In the <b>ID Shield Admin Console</b>, press the <b>Refresh</b> button.
			<li>Confirm <b>\ID Shield</b> is displayed as the settings folder 
			following the refresh.
			<li>On the <b>Redaction Settings</b> tab specify the rules file location from above 
			in the <b>Redaction Rules</b> box.
			<li>Press "OK" to accept the default value for all other settings.
		</ul>
<p>
		<li><b>OCR The test documents in the Laserfiche Client</b>
		<ul>
			<li>Select all 10 documents in the <b>Documents</b> folder.
			<li>Select the <b>Action | OCR/Extract Text/Index...</b> menu option (or button)
			<li>Check <b>OCR / Extract Text</b>
			<li>Select <b>All image pages</b>
			<li>Under options, make sure all options are unchecked
			<li>Press <b>OK</b> to OCR the documents.
		</ul>
<p>
		<li><b>Remote machine setup</b>
		<ul>
			<li>Choose a machine with at least 4 cores.
			<li>Install and license <b>ID Shield for Laserfiche</b> on the virtual machine.
			<li>Laserfiche software does not need to be installed on the machine.
		</ul>
<p>
		<li><b>Set the Log On for the service to "Administrator" on both machines.</b>
		<ul>
			<li>It is currently a known issue that other Extract Systems software may not run 
			if the service was started under the <b>Local System</b> account.  To avoid this issue,
			set the <b>Log On</b> value for the service on both machines to <b>Administrator</b>.
			<li>Right-click on <b>My Computer</b> (or <b>Computor</b>) and select <b>Manage</b>.
			<li>Select <b>Services</b> under either <b>Services and Applications</b> or <b>Configuration</b>
			<li>Double-click <b>ID Shield Laserfiche Background Redaction</b>
			<li>Go to the <b>Log On</b> tab.
			<li>Select <b>This account</b> and specify the credentials for the "Administrator" account.
		</ul>
	</ul>			
<p>
	<li><h3>Exercise Service Locally</h3>
	<ul>
<p>
		<li><b>Start the service</b>
		<ul>
			<li>On the virtual machine, run the <b>ID Shield Background Service</b> console via the Windows Start menu.
			<li>Specify the <b>ID Shield Demo</b> or <b>LF8</b> repository as the target repository.
			<li>Enter <b>Laserfiche User</b>: "User"
			<li>Enter <b>Laserfiche Password</b>: "a"
			<li>Leave the number of threads setting set to as many threads as needed for peak performance. (1 on a VM since it
			only supports one core).
			<li>Press <b>Start</b>.
			<li>Confirm the service status changes first to <b>Starting...</b> then to <b>Running</b>.
			<li>Press <b>OK</b> to close the Background Service Console.
			<li>Open Windows Task Manager and confirm <b>ESLaserficheService.exe</b> is running.
		</ul>
<p>
		<li><b>Submit a document while the service is running</b>
		<ul>
			<li>Open the Laserfiche Client on the virtual machine.
			<li>Select document <b>01</b> in the <b>Documents</b> folder and press the 
			<b>Submit for background redaction</b> button.
			<li>Using Task Manager, confirm that within 1 minute CPU usage climbs to at or near 100% and that the process
			<b>SSOCR2.exe</b> appears.
			<li>Wait for CPU usage to return to near zero.
			<li>Select the root node of the repository in the Laserfiche Client, and press the
			<b>Verify redactions</b> button.
			<li>Confirm that document <b>01</b> is displayed for verification and the SSN in the upper left is properly redacted.
			<li>Press the <b>Verify</b> button on the ID Shield verification toolbar and confirm that verification completes.
			<li>Run <b>ID Shield Background Service</b> console via the Windows Start menu.
			<li>Press <b>Stop</b>.
			<li>Confirm the service status changes first to <b>Stopping...</b> and then to <b>Stopped</b> within a few seconds.
			(The service should stop within a few seconds if documents are not currently being processed.  Stopping the service
			may take a minute or longer if files are processing since it will first finish processing the file it's working on)
		</ul>
<p>
		<li><b>Submit a document before starting the service</b>
		<ul>
			<li>In the Laserfiche Client, select document <b>02</b> in the documents folder.
			<li>Press the <b>Submit for background redaction</b> button.
			<li>In the <b>ID Shield Background Service</b> console press <b>Start</b>.
			<li>Using Task Manager, confirm that within 1 minute CPU usage climbs to at or near 100% and that the process
			<b>SSOCR2.exe</b> appears.
			<li>Wait for CPU usage to return to near zero.
			<li>Select the root node of the repository in the Laserfiche Client, and press the
			<b>Verify redactions</b> button.
			<li>Confirm that document <b>02</b> is displayed for verification and the SSN in the upper left is properly redacted.
			<li>Press the <b>Verify</b> button on the ID Shield verification toolbar and confirm that verification completes.
		</ul>
<p>
		<li><b>Test service auto-start</b>
		<ul>
			<li>Run <b>ID Shield Background Service</b> console via the Windows Start menu.
			<li>Check the <b>Run background redaction service automatically on startup</b> box.
			<li>Press <b>OK</b> to accept the setting.
			<li>Restart the VM
			<li>After the restart, use Windows Task manager to confirm the process <b>ESLaserficheService.exe</b> is running.
			<li>In the Laserfiche Client, select document <b>03</b> in the documents folder.
			<li>Open the <b>ID Shield Background Service</b> console via the Windows Start menu.
			<li>(*Read the next two steps before executing this step*) Leave the <b>ID Shield Background Service</b> console
			open and press the <b>Submit for background redaction</b> button.
			<li>Using Task Manager, confirm that within 1 minute CPU usage climbs to at or near 100% and that the process
			<b>SSOCR2.exe</b> appears.
			<li>Immediately (while the document is still processing) press <b>Stop</b> in the <b>ID Shield Background Service</b> console.
			<li>Confirm the service status changes to <b>Stopping...</b> and the eventually changes to <b>Stopped</b>.
			(This may take a minute or more as it will finish processing the document before stopping.)
			<li>Uncheck the <b>Run background redaction service automatically on startup</b> box.
			<li>Press <b>OK</b> to close the console.
			<li>In the Laserfiche Client, select the root node of the repository, and press the
			<b>Verify redactions</b> button.
			<li>Confirm that document <b>03</b> is displayed for verification and that clues and redactions appear on the page.
			<li>Press the <b>Verify</b> button on the ID Shield verification toolbar and confirm that verification completes.
		</ul>
	</ul>
<p>
	<li><h3>Exercise service from remote machine</h3>
	<ul>
<p>
		<li><b>Process in a single thread</b>
		<ul>
<p>
			<li>On the Remote machine</b>
			<ul>
				<li>Run <b>ID Shield Background Service</b> console via the Windows Start menu.
				<li>In the <b>Laserfiche Repository</b> box, select <b>ID Shield Demo</b> (or <b>LF8</b>) 
				or manually specify the server by entering <b>Laserfiche-72/ID Shield Demo</b> or <b>Laserfiche-8/LF8</b> if 
				<b>ID Shield Demo</b> (or <b>LF8</b>) does not appear in the list.
				<li>Specify for the service to use 1 thread.
				<li>Press <b>Start</b>.
				<li>Confirm the service status changes first to <b>Starting...</b> and then to <b>Running</b>.
				<li>Press <b>OK</b> to close the console.
			</ul>
<p>
			<li>On the virtual machine
			<ul>
				<li>Open the Laserfiche Client
				<li>In the <b>Documents</b> folder select documents <b>04</b> thru <b>10</b> and press the 
				<b>Submit for background redaction</b> button.
			</ul>
<p>		
			<li>On the Remote machine</b>
			<ul>
				<li>Using task manager confirm that within one minute that one (and only one) instance of SSOCR2.exe starts processing.
				<li>Run <b>ID Shield Background Service</b> console via the Windows Start menu.
				<li>As soon as you confirm processing started, press the <b>Stop</b> button.
				<li>Confirm the service status changes first to <b>Stopping</b> and then to <b>Stopped</b>.
			</ul>
		</ul>
<p>
		<li><b>Process in 2 threads</b>
		<ul>
<p>
			<li>On the Remote machine</b>
			<ul>
				<li>Run <b>ID Shield Background Service</b> console via the Windows Start menu.
				<li>Specify for the service to use 2 threads.
				<li>Press <b>Start</b>.
				<li>Confirm the service status changes first to <b>Starting...</b> and then to <b>Running</b>.
				<li>Using task manager confirm that two instances of SSOCR2.exe starts processing.
				<li>As soon as you confirm processing started, in the <b>ID Shield Background Service</b> console, press the <b>Stop</b> button.
				<li>Confirm the service status changes first to <b>Stopping...</b> and then to <b>Stopped</b>.
			</ul>
<p>
			<li>On the virtual machine
			<ul>
				<li>Open the Laserfiche Client.
				<li>Select the root node of the repository in the Laserfiche Client, and press the
				<b>Verify redactions</b> button.
				<li>Confirm that documents <b>04</b> thru <b>06</b> (and possibly more) are presented for verification.
			</ul>
		</ul>
<p>
		<li><b>Process in optimal number of threads on both machines.</b>
		<ul>
<p>
			<li>On the remote machine
			<ul>
				<li>Run <b>ID Shield Background Service</b> console via the Windows Start menu.
				<li>Change the number of threads setting set to as many threads as needed for peak performance.
				<li>Press <b>Start</b>
				<li>Ensure the service status change first to <b>Starting...</b> and then to <b>Running</b>.
			</ul>
<p>
			<li>On the virtual machine
			<ul>
				<li>Run <b>ID Shield Background Service</b> console via the Windows Start menu.
				<li>Ensure the number of threads setting set to as many threads as needed for peak performance.
				<li>Press <b>Start</b>
				<li>Ensure the service status change first to <b>Starting...</b> and then to <b>Running</b>.
				<li>Open the Laserfiche Client.
				<li>In the <b>Documents</b> folder select all ten documents.
				<li>Select the <b>Action | View Tags...</b> menu in the Client
				<li>Remove all instances of <b>ID Shield - Processed</b>, <b>ID Shield - Needs Verification</b> and 
				<b>ID Shield - Verified</b> tags.
				<li>Apply the <b>ID Shield - Needs Processing</b> tag to all documents.
				<li>Use Windows Task Manager to confirm cpu usage jumps to at or near 100% within one minute.
			</ul>
<p>
			<li>On the remote machine
			<ul>
				<li>Use Windows Task Manager to confirm at least 4 instances of SSOCR2.exe are processing.
				<li>Wait until CPU usage drops to 0%.
			</ul>
<p>
			<li>On the virtual machine
			<ul>
				<li>Open the Laserfiche Client.
				<li>Select the root node of the repository in the Laserfiche Client, and press the
				<b>Verify redactions</b> button.
				<li>Confirm all ten documents are presented for verification.
				<li>(Keep the service running on both machines).
			</ul>
		</u>
	</ul>
<p>
	<li><h3>Test Special Cases</h3>
	<ul>
		<li><b>Laserfiche Server goes down</b>.
		<ul>
			<li>On the remote machine, run the <b>ID Shield Background Service</b> console and confirm the service is running.
			<li>With the ID Shield redaction service still running on the remote machine, shut down the virtual machine.
			<li>On the remote confirm that the service status changes to <b>Stopped</b> within a couple minutes.
			<li>On the remote machine, run <b>View Exception Log</b> from the Windows start menu.
			<li>Confirm the log contains one or more entries reporting "Server not found"
		</ul>
<p>
		<li><b>Exceptions logging.</b>
		<ul>
			<li>Start the virtual machine.
			<li>Open the Laserfiche Client.
			<li>In the <b>Documents</b> folder select all ten documents.
			<li>Select the <b>Action | View Tags...</b> menu in the Client
			<li>Remove all instances of <b>ID Shield - Processed</b>, <b>ID Shield - Needs Verification</b> and 
			<b>ID Shield - Verified</b> tags.
			<li>Apply the <b>ID Shield - Needs Processing</b> tag to all documents.
			<li>Run <b>ID Shield Background Service</b> console via the Windows Start menu.
			<li>Press <b>Start</b>
			<li>Use the task manager to confirm that cpu usage climbs to at or near 100%
			<li>Use Windows Control Panel | Network Connections to disable the VM's network connection.
			<li>Confirm that within minute or so the cpu usage drops to near zero.
			<li>Wait 5 minutes or so.
			<li>Run <b>View Exception Log</b> from the Windows start menu.
			<li>Confirm one or more <b>Failed to process document [x]!</b> exception is logged and that the details
			specify a USB key timeout issue.
		</ul>
	</ul>
<p>
</ul>
</BODY>
</HTML>
