<HTML>

<HEAD>
<TITLE>Counter Manager - Testing Checklist</TITLE>
<link type="text/css" rel="stylesheet" 
href="../../../../../ReusableComponents/COMComponents/UCLIDTestingFramework/Misc/UCLIDTesting.css">
</HEAD>

<BODY>

<h1>Counter Manager - Testing Checklist<br>
<IMG src="../../../../../ReusableComponents/COMComponents/UCLIDTestingFramework/Misc/TestingChecklistHeader.gif">
</h1>
<hr>

<ol>
  	<li><h2>Command Line Options</h2></li>
  	<ul>
    		<li>TBD
  	</ul>
<p>
  	<li><h2>General User Interface</h2></li>
  	<ul>
		<li>Confirm that a multi-line edit box for <b>Database licensse string</b> is 
		provided.
		<li>Confirm that <b>Ctrl+V</b> pastes Clipboard contents into the edit box.
		<li>Confirm that the associated <b>Paste License String</b> button pastes 
		Clipboard contents into the edit box.
		<ul>
			<li>Confirm that this button is the only control enabled before a valid 
			<b>Database license string</b> has been provided.
		</ul>
		<li>Confirm that a read-only <b>Database server</b> edit box is provided.
		<li>Confirm that a read-only <b>Database created</b> edit box is provided.
		<ul>
			<li>Confirm that date, time and timezone information is displayed in 
			the edit box.
		</ul>
		<li>Confirm that a read-only <b>Database name</b> edit box is provided.
		<li>Confirm that a read-only <b>Last database restore</b> edit box is provided.
		<ul>
			<li>Confirm that date, time and timezone information is displayed in 
			the edit box.
		</ul>
		<li>Confirm that a read-only <b>Database ID</b> edit box is provided.
		<ul>
			<li>Confirm that the displayed text is in GUID format with <b>8-4-4-4-12</b> 
			characters.
		</ul>
		<li>Confirm that a read-only <b>Last counter update</b> edit box is provided.
		<ul>
			<li>Confirm that date, time and timezone information is displayed in 
			the edit box.
		</ul>
		<li>Confirm that a read-only <b>Counter data validity</b> edit box is provided.
		<ul>
			<li>Confirm that edit box contents are either: <b>Valid</b> or 
			<b>Invalid license string</b>.
		</ul>
		<li>Confirm that a read-only <b>Counter data as of</b> edit box is provided.
		<ul>
			<li>Confirm that date, time and timezone information is displayed in 
			the edit box.
		</ul>
		<li>Confirm that a <b>Generate counter update code</b> radio button is provided.
		<li>Confirm that a <b>Generate unlock code</b> radio button is provided.
		<li>Confirm that the <b>Generate counter update code</b> radio button is enabled 
		only if Counter data validity = <b>Valid</b>.
		<li>Confirm that a <b>Generate unlock code</b> radio button is provided.
		<li>Confirm that a table is provided for standard and custom counters with the 
		following column headers when the <b>Generate counter update code</b> option is 
		selected.
		<ul>
			<li>ID
			<li>Name
			<li>Value
			<li>Operation
			<li>Apply Value
		</ul>
		<li>Confirm that the column headers are as follows when the <b>Generate unlock code</b> 
		option is selected.
		<ul>
			<li>ID
			<li>Name
			<li>Value
			<li>Value Log
			<li>Validity
		</ul>
		<li>Confirm that a multi-line edit box is provided for <b>Comments</b>.
		<li>Confirm that the <b>Comments</b> edit box has a scrollbar.
<p>
		<li>Confirm that the following <b>Operation</b> option is available for a new 
		counter.
		<ul>
			<li>Create
		</ul>
		<li>Confirm that the following <b>Operation</b> options are available for a new 
		counter.
		<ul>
			<li>Set
			<li>Increment
			<li>Decrement
			<li>Delete
		</ul>
		<li>Confirm that the following fields cannot be modified for an existing counter.
		<ul>
			<li>ID
			<li>Name
			<li>Value
		</ul>
		<li>Confirm that existing counters cannot be deleted from the table.
		<li>Confirm that a customer name must be specified.
		<li>Confirm that a name must be specified for each custom counter.
		<li>Confirm that an operation must be specified for each counter
  	</ul>
<p>
  	<li><h2>Functionality</h2></li>
  	<ul>
		<li>Confirm that Counter Manager can parse current and older input strings.
		<li>Confirm that Counter Manager can provide version-specific updates and unlock 
		codes.
		<li>Confirm that an ID cannot be used more than once in the list of counters.
		<ul>
			<li>Confirm that a <b>Cannot use the same ID as an existing counter</b> 
			error message is presented.
		</ul>
		<li>Confirm that a custom counter must end with either <b>(By Document)</b> or 
		<b>(By Page)</b>
		<ul>
			<li>Confirm that a <b>Counter name must end with "(By Document)" or 
			"(By Page)"</b> error message is presented.
			<li>Confirm that the required ending text is not case sensitive.
		</ul>
		<li>Confirm that a custom counter cannot have the same name as one of the 
		<b>Standard</b> counters.
		<ul>
			<li>Confirm that a <b>Cannot use a standard counter name for a custom 
			counter</b> error message is presented.
		</ul>
		<li>Confirm that a counter cannot be decremented by more than its current value.
		<li>Confirm that if only existing counters are listed, at least one <b>Operation</b> 
		must be defined.
		<li>Confirm that an <b>Apply Value</b> must be defined for each counter with a 
		selected <b>Operation</b>.
<p>
		<li><u>Generate code</u>
		<ul>
			<li>Confirm that clicking the button displays a <b>License email</b> window.
			<li>Confirm that the window includes a <b>To</b> edit box.
			<li>Confirm that the window includes a <b>Cc</b> edit box.
			<li>Confirm that the <b>Cc</b> edit box includes a prefix read-only edit box 
			pre-populated with <b>Extract Licensing</b>.
			<li>Confirm that the window includes a <b>Subject</b> edit box.
			<li>Confirm that the <b>Subject</b> edit box is pre-populated with appropriate 
			text that includes the specified customer name.
			<li>Confirm that the message body includes a read-only section with information 
			about the counter update (or unlock code) and the steps to apply it to the 
			database.
			<li>Confirm that the window includes a <b>Send email</b> button.
			<li>Confirm that sending an email requires an email address in the <b>To</b> 
			edit box.
			<li>Confirm that sending an email requires appropriate settings 
			in the <b>EmailSettings.config</b> file in the network folder.
			<li>Confirm that if the config file is not present, a meaningful 
			error message is presented.
		</ul>
<p>
		<li>Confirm that the complete text provided by <b>Manage Rule Execution Counters</b> 
		can be pasted into Counter Manager and parsed correctly.
		<li><b>[ISSUE-13420]</b> Confirm that pasting an invalid license string clears edit 
		box contents.
  	</ul>
<p>
  	<li><h2>Failure Testing</h2></li>
  	<ul>
		<li><b>[ISSUE-13355]</b> Modifying Change Table Will Corrupt Counter
		<ul>
			<li>Start with clean <b>Demo_FlexIndex</b> database after possible schema 
			update.
			<li>Add counter ID = 1 with 1000 counts.
			<li>Exercise FPS to run rules and decrement counts.
			<li>Remove last entry from <b>SecureCounterValueChange</b> table.
			<li>Confirm that FAM counters are now corrupt.
			<li>Confirm that an unlock request can be generated.
			<li>Confirm that an unlock code can be generated and applied.
			<li>Confirm that the counter is no longer corrupt.
		</ul>
		<li>Database Detach and Reattach Will Corrupt Counter
		<ul>
			<li>Start with clean <b>Demo_FlexIndex</b> database after possible schema 
			update.
			<li>Add counter ID = 1 with 1000 counts.
			<li>Exercise FPS to run rules and decrement counts.
			<li>Confirm that FAM counters are still valid.
			<li>Use <b>SQL Management Studio</b> to <b>Detach</b> the database.
			<li>Use <b>SQL Management Studio</b> to <b>Attach</b> the database.
			<li>Confirm that FAM counters are now corrupt.
			<li>Confirm that an unlock request can be generated.
			<li>Confirm that an unlock code can be generated and applied.
			<li>Confirm that the counter is no longer corrupt.
		</ul>
		<li>Database Backup and Restore Will Corrupt Counter
		<ul>
			<li>Start with clean <b>Demo_FlexIndex</b> database after possible schema 
			update.
			<li>Add counter ID = 1 with 1000 counts.
			<li>Exercise FPS to run rules and decrement counts.
			<li>Confirm that FAM counters are still valid.
			<li>Use <b>SQL Management Studio</b> to <b>Backup</b> the database.
			<li>Use <b>SQL Management Studio</b> to <b>Delete</b> the database.
			<li>Use <b>SQL Management Studio</b> to <b>Restore</b> the database.
			<li>Confirm that FAM counters are now corrupt.
			<li>Confirm that an unlock request can be generated.
			<li>Confirm that an unlock code can be generated and applied.
			<li>Confirm that the counter is no longer corrupt.
		</ul>
<p>
  	   	<LI><b>[ISSUE-13335]</b> DB Admin Debug Data
        	<ul>
			<li>Use DB Admin to request a counter update for a specific database.
			<li>Use <b>Counter Manager</b> to create a new counter for the database.
			<li>Use DB Admin to apply the update string to a <b>different</b> 
			database.
			<li>Confirm that the update fails.
			<li>Confirm that the associated debug data includes the expected and 
			actual database names.
        	</ul>
  	   	<LI><b>[ISSUE-13361]</b> FAM Counter Debug Data
        	<ul>
			<li>Create and apply a custom counter such as <b>Wayne (By Page)</b> with 
			ID = 234.
			<li>Create a simple RSD file that uses the same custom counter ID but with 
			a slightly different name, such as <b>Wayne - (By Page)</b>.
			<li>Confirm that an exception is thrown if trying to process images with 
			this ruleset.
			<li>Confirm that the associated debug data includes the expected and 
			actual <b>counter names</b>.
			<li>Confirm that the associated debug data includes the expected and 
			actual <b>counter IDs</b>.
        	</ul>
  	   	<LI><b>[ISSUE-13388]</b> Manage Rule Execution Text Updates
		<ul>
			<li>Corrupt the FAM counters in a database.
			<li>Create and send an <b>Unlock</b> request.
			<li>Apply the received <b>Unlock</b> code.
			<li>Confirm that FAM counters are no longer corrupt.
			<li>Confirm that button text reflects the counters' usable state.
		</ul>
		<li><b>[ISSUE-13402]</b> Unlock Requests With Unrecoverable Counters
		<ul>
			<li>Start with clean <b>Test</b> database.
			<li>Add each <b>standard</b> counter with 1000 counts.
			<li>Exercise FPS to run rules and decrement from each counter.
			<li>Confirm that FAM counters have each been decremented.
			<li>Modify the <b>SecureCounterValue</b> entry for the Pagination counter 
			from the <b>SecureCounter</b> table.
			<li>Confirm that just one FAM counter is now corrupt.
			<li>Confirm that an unlock request can be generated.
			<li>Confirm that <b>Counter Manager</b> identifies the unrecoverable counter 
			and the issue.
			<li>Confirm that attempting to generate an unlock code displays an 
			<b>Unrecoverable counter</b> error message with directions to delete it.
			<li>Confirm that <b>SQL Management Studio</b> can delete the modified entry 
			from the <b>SecureCounter</b> table.
			<li>Confirm that the counter is no longer corrupt.
		</ul>
  	   	<LI><b>[ISSUE-13404]</b> FAM Counters With Invalid Database ID
        	<ul>
			<li>Create a new database (current schema) without any counters.
			<li>Backup or detach the database and restore it to a different machine.
			<li>From DB Admin on the new machine, generate an update code to create a 
			counter.
			<li>Use <b>Counter Manager</b> to create an update code with a new counter.
			<li>Confirm that the new counter is successfully applied to the database.
        	</ul>
  	   	<LI><b>[ISSUE-13409]</b> FAM Counters
        	<ul>
			<li>Create a new database (current schema) and add one or more counters.
			<li>Detach and reattach the database to the same machine.
			<li>Confirm that the counters are in a corrupt state.
			<li>Generate an <b>unlock code</b>.
			<li>Use <b>Counter Manager</b> to create an unlock string.
			<li>Confirm that <b>Counter Manager</b> displays the most recent counter 
			value from the <b>SecureCounterValueHistory</b> table as extracted from 
			the unlock request.
        	</ul>
		<li><b>[ISSUE-13437]</b> Unlock Requests With Partial Corrupt Counters
		<ul>
			<li>Start with clean <b>Test</b> database.
			<li>Add each <b>standard</b> counter with 1000 counts.
			<li>Exercise FPS to run rules and decrement from each counter.
			<li>Confirm that FAM counters have each been decremented.
			<li>Remove last entry from <b>SecureCounterValueChange</b> table for the 
			<b>Pagination</b> counter.
			<li>Confirm that just one FAM counter is now corrupt.
			<li>Confirm that an unlock request can be generated.
			<li>Confirm that <b>Counter Manager</b> identifies the corrupt counter and 
			the issue.
			<ul>
				<li>Confirm that counts are present in the <b>Value Log</b> column 
				for counters 3 and 4.
				<li>Confirm that the table can be scrolled to see status for counter 
				5.
			</ul>
			<li>Confirm that an unlock code can be generated and applied.
			<li>Confirm that the counter is no longer corrupt.
		</ul>
<p>
  	   	<LI><b>[ISSUE-13459]</b> Database ID and FAM Counter Corruption
		<ul>
			<li><u>ID = 0, DB without Counters</u>
			<ul>
				<li>Create a new database.
				<li>Use <b>SQL Mgmt Studio</b> to clear the 
				<b>Database ID</b> field in the <b>DBInfo</b> table.
				<li>Generate a <b>Counter Update Request</b>.
				<li>Confirm that the request includes a Database ID 
				containing all zeroes.
				<li>Confirm that the request can be successfully 
				pasted into <b>Counter Manager</b>.
				<li>Confirm that <b>Counter Manager</b> displays a 
				different, non-zero Database ID.
				<li>Confirm that a counter can be created and applied.
				<li>Confirm that a new update request includes the new 
				Database ID.
			</ul>
<p>
			<li><u>ID = 0, DB with Counters</u>
			<ul>
				<li>Operate on the database from the above test.
				<li>Confirm that one or more counters are present and valid.
				<li>Use <b>SQL Mgmt Studio</b> to clear the 
				<b>Database ID</b> field in the <b>DBInfo</b> table.
				<li>Confirm that the existing counter is <b>Corrupted</b>.
				<li>Generate an <b>Unlock Request</b>.
				<li>Confirm that an <b>ELI39181: Request code cannot be 
				generated because Database ID is missing</b> exception is 
				displayed.
				<li>Use <b>SQL Mgmt Studio</b> to remove all entries from the 
				<b>SecureCounter</b> table.
				<li>Confirm that a <b>Counter Update Request</b> can be 
				generated.
				<li>Confirm that a new counter can be created and applied.
			</ul>
<p>
			<li><u>ID missing, DB with Counters</u>
			<ul>
				<li>Operate on the database from the above test.
				<li>Use <b>SQL Mgmt Studio</b> to remove the 
				<b>Database ID</b> field in the <b>DBInfo</b> table.
				<li>Generate a <b>Counter Update Request</b>.
				<li>Confirm that the existing counter is <b>Corrupted</b>.
				<li>Generate an <b>Unlock Request</b>.
				<li>Confirm that an <b>ELI39181: Request code cannot be 
				generated because Database ID is missing</b> exception is 
				displayed.
				<li>Use <b>SQL Mgmt Studio</b> to remove all entries from the 
				<b>SecureCounter</b> table.
				<li>Confirm that a <b>Counter Update Request</b> can be 
				generated.
				<li>Confirm that a new counter can be created.
				<li>Confirm that applying the counter is successful.
			</ul>
<p>
			<li><b>[ISSUE-13482]</b> <u>ID missing, DB without Counters</u>
			<ul>
				<li>Create a new database.
				<li>Use <b>SQL Mgmt Studio</b> to remove the 
				<b>Database ID</b> field in the <b>DBInfo</b> table.
				<li>Generate a <b>Counter Update Request</b>.
				<li>Confirm that the request includes a Database ID 
				containing all zeroes.
				<li>Confirm that the request can be successfully 
				pasted into <b>Counter Manager</b>.
				<li>Confirm that <b>Counter Manager</b> displays a 
				different, non-zero Database ID.
				<li>Confirm that a counter can be created.
				<li>Confirm that applying the counter is successful.
			</ul>
		</ul>
  	</ul>
<p>
  	<li><h2>Tests Needed</h2></li>
  	<ul>
		<li>Change Log text turns red if values are different
		<li>Corrupt: Detach and reattach DB
		<li>Corrupt: Backup and restore DB
		<li>Create unrecoverable counter, confirm that it must be deleted before any other 
		action
		<li>
  	</ul>
<p>
  	<li><h2>Miscellaneous</h2></li>
  	<ul>
		<li>Confirm that Counter Manager running from the network location 
		of <b>I:\Common\Engineering\Tools\SecureClients\DatabaseBasedCounterManager</b> 
		is independent of the installed software version.
		<li>Confirm that Counter Manager running from a local location will not run unless 
		either or both of <b>\\fnp2\internal</b> or <b>\\es-it-dc-01\internal</b> is mapped.
		<li>Confirm that Counter Manager has a non-default icon.
		<li>Confirm that the <b>Counter data validity</b> edit box or the <b>Validity</b> 
		column displays the reason for counter corruption.
		<li>Confirm that the <b>usage message</b> lists all required DLLs.
<p>
  	   	<LI><b>[ISSUE-13235]</b> FAM Counters
		<ul>
			<li>Confirm that each standard counter can successfully be created.
			<li>Confirm that each standard counter can successfully support rule 
			execution with correct decrements.
			<li>Confirm that each standard counter can successfully be updated.
			<ul>
				<li>ID = 1, Indexing By Document
				<li>ID = 2, Pagination By Document
				<li>ID = 3, Redaction By Page
				<li>ID = 4, Redaction By Document
				<li>ID = 5, Indexing By Page
			</ul>
			<li>Confirm that the above tests also work with a <b>Custom By Page</b> 
			counter.
			<li>Confirm that the above tests also work with a <b>Custom By Document</b> 
			counter.
		</ul>
  	</ul>
</ol>
</body>
</html>
